{"version":3,"sources":["js/brim.js","js/gyro.js","js/livereload.js","js/socket.js"],"names":["gajus","brim","platform","view","touched","window","navigator","standalone","os","family","parseInt","version","scream","Scream","width","portrait","landscape","Brim","viewport","on","e","viewName","document","ontouchstart","preventDefault","addEventListener","orientation","getElementsByClassName","style","display","body","innerHTML","getElementById","FULLTILT","requestAnimationFrame","client","fulltiltOrientation","motion","getDeviceMotion","then","motionData","catch","msg","console","error","log","sendOrientation","inVR","getScreenAdjustedRotationRate","obj","alpha","beta","gamma","send","JSON","stringify","innerWidth","innerHeight","userAgent","match","touches","ontouchend","livereloadScript","createElement","setAttribute","location","hostname","appendChild","Image","WebSocket","host","canvas","context","getContext","onmessage","event","undefined","data","size","image","onload","height","drawImage","src"],"mappings":"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","file":"scripts.min.js","sourcesContent":["var gajus, brim, platform, view, touched\n\nif (!window.navigator.standalone && platform.os.family === 'iOS' && parseInt(platform.os.version, 10) >= 8) {\n  let scream = gajus.Scream({\n    width: {\n      portrait: 320,\n      landscape: 640\n    }\n  })\n\n  brim = gajus.Brim({\n    viewport: scream\n  })\n\n  brim.on('viewchange', function (e) {\n    view = e.viewName\n    if (e.viewName === 'minimal') {\n      document.ontouchstart = function (e) {\n        e.preventDefault()\n        touched(e)\n      }\n    } else {\n      document.ontouchstart = function (e) {\n        touched(e)\n      }\n    }\n  })\n} else if (platform.os.family === 'iOS' && parseInt(platform.os.version, 10) >= 8) {\n  window.addEventListener('orientationchange', function () {\n    if (window.orientation) {\n      view = 'minimal'\n      document.getElementsByClassName('cover')[0].style.display = 'none'\n    } else {\n      document.getElementsByClassName('cover')[0].style.display = 'block'\n    }\n  }, false)\n  document.ontouchstart = function (e) {\n    e.preventDefault()\n    touched(e)\n  }\n  document.body.innerHTML = document.getElementById('brim-mask').innerHTML + document.getElementById('brim-main').innerHTML\n  if (window.orientation) {\n    view = 'minimal'\n    document.getElementsByClassName('cover')[0].style.display = 'none'\n  }\n} else {\n  document.body.innerHTML = document.getElementById('brim-main').innerHTML\n}\n","var FULLTILT, requestAnimationFrame, client, view, fulltiltOrientation, platform\n\nlet motion = new FULLTILT.getDeviceMotion()\nmotion.then((motionData) => {\n  fulltiltOrientation = motionData\n}).catch((msg) => {\n  console.error(msg)\n  console.log('Data not available!')\n})\n\nvar sendOrientation = function () {\n  if (fulltiltOrientation && inVR()) {\n    let motionData = fulltiltOrientation.getScreenAdjustedRotationRate()\n    let obj = {}\n    obj.alpha = motionData.alpha\n    obj.beta = motionData.beta\n    obj.gamma = motionData.gamma\n    client.send(JSON.stringify(obj))\n  }\n\n  requestAnimationFrame(sendOrientation)\n}\nsendOrientation()\n\nvar inVR = function () {\n  if (!window.navigator.standalone && platform.os.family === 'iOS' && parseInt(platform.os.version, 10) >= 8 && view === 'minimal' || window.innerWidth > window.innerHeight && (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/iemobile/i))) {\n    return true\n  }\n  return false\n}\n\nlet touches = 0\nvar touched = function (e) {\n  if (client) {\n    touches++\n  }\n}\n\ndocument.ontouchend = function () {\n  if (touches > 3) {\n    console.log('invertX')\n    client.send('invertX')\n  } else if (touches > 2) {\n    console.log('recalibrate')\n    client.send('recalibrate')\n  } else if (touches > 1) {\n    client.send('rightClick')\n    console.log('rightClick')\n  } else if (touches > 0) {\n    client.send('mouseClick')\n    console.log('mouseClick')\n  }\n  touches = 0\n}\n\ntouched()\n","let livereloadScript = document.createElement('script')\nlivereloadScript.setAttribute('src', 'http://' + window.location.hostname + ':35729/livereload.js')\nlivereloadScript.setAttribute('charset', 'utf-8')\ndocument.body.appendChild(livereloadScript)\n","var Image, WebSocket\nlet client = new WebSocket('ws://' + window.location.host)\nlet canvas = document.getElementById('video')\nlet context = canvas.getContext('2d')\nclient.onmessage = (event) => {\n  if (event.data.size === undefined) {\n    let image = new Image()\n    image.onload = () => {\n      canvas.width = image.width\n      canvas.height = image.height\n      context.drawImage(image, 0, 0, image.width, image.height)\n    }\n    image.src = event.data\n  }\n}\n"],"sourceRoot":"/source/"}