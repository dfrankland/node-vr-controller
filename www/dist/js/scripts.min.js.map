{"version":3,"sources":["js/brim.js","js/gyro.js","js/livereload.js","js/socket.js"],"names":["gajus","brim","platform","view","touched","window","navigator","standalone","os","family","parseInt","version","scream","Scream","width","portrait","landscape","Brim","viewport","on","e","viewName","document","ontouchstart","preventDefault","addEventListener","orientation","getElementsByClassName","style","display","body","innerHTML","getElementById","FULLTILT","requestAnimationFrame","client","fulltiltOrientation","mouse","motion","getDeviceMotion","then","motionData","catch","msg","console","error","log","sendOrientation","inVR","getScreenAdjustedAccelerationIncludingGravity","obj","x","y","z","send","JSON","stringify","_motionData","getScreenAdjustedRotationRate","_obj","alpha","beta","gamma","innerWidth","innerHeight","userAgent","match","touches","ontouchend","livereloadScript","createElement","setAttribute","location","hostname","appendChild","Image","WebSocket","host","canvas","player","jsmpeg"],"mappings":"YAAA,IAAIA,OAAOC,KAAMC,SAAUC,KAAMC,OAAjC,KAAIC,OAAOC,UAAMC,YAAjB,QAAiCL,SAAjCM,GAAAC,QAAAC,SAAAR,SAAAM,GAAAG,QAAA,KAAA,EAAA,CAGE,GAAIC,QAASZ,MAAMa,QADjBC,OACEC,SAAS,IACXC,UAAO,MADiBf,MAA1BD,MAAAiB,MAQEC,SAAUN,SADMX,KAAlBkB,GAAA,aAAA,SAAAC,GAKEjB,KAAOiB,EAAEC,SADX,YAAKD,EAAGC,SACNC,SAASC,aAAT,SAAAH,GACIA,EAAEI,iBACJpB,QAASgB,IAGRE,SAHDC,aAAA,SAAAH,GADFhB,QAKOgB,UAIN,QAAAlB,SAAAM,GAAAC,QAAAC,SAAAR,SAAAM,GAAAG,QAAA,KAAA,GACFN,OAZDoB,iBAAA,oBAAA,WAaKpB,OAAIqB,aACTvB,KAAO,UACLmB,SAAWK,uBAAa,SAAA,GAAAC,MAAAC,QAAA,QAEtBP,SAASK,uBAAuB,SAAS,GAAGC,MAAMC,QAAU,UAE5D,GACDP,SAAAC,aAAA,SAAAH,GANHA,EAOGI,iBACHpB,QAASgB,IAEPE,SAAAQ,KAAAC,UAAAT,SAAAU,eAAA,aAAAD,UAAAT,SAAAU,eAAA,aAAAD,UAFF1B,OAAAqB,cAIAvB,KAAS,UACTmB,SAAWK,uBAAa,SAAA,GAAAC,MAAAC,QAAA,SAGvBP,SAAAQ,KAAAC,UAAAT,SAAAU,eAAA,aAAAD;YC5CH,IAAIE,UAAUC,sBAAuBC,OAAQhC,KAAMiC,oBAA/CC,OAAJ,EAGIC,OAAS,GAAIL,UAASM,eAD1BD,QAAIE,KAAQ,SAAAC,GACZL,oBAAiBK,IACjBC,MAAO,SAAAC,GACLC,QAAAC,MAAAF,GADFC,QAESE,IAAA,wBAGR,IALDC,iBAAA,QAAAA,KAQE,GAAIX,qBAAuBY,QAAUX,MAAO,CAD1C,GAAAI,GAAAL,oBAAAa,gDACEC,IACFA,GAAIC,EAAAV,EAAaU,EACjBD,EAAIE,EAAAX,EAAJW,EACAF,EAAIG,EAAIZ,EAAWY,EACnBlB,OAAAmB,KAAQC,KAAAC,UAARN,QACA,IAAQd,qBAARY,OAAA,CACA,GAAAS,GAAiBrB,oBAAjBsB,gCANFC,IAQEA,GAAIC,MAAAH,EAAaG,MACjBD,EAAIE,KAAMJ,EAAVI,KACAF,EAAAG,MAAAL,EAAYK,MACZ3B,OAAImB,KAAOC,KAAAC,UAAWG,IAGvBzB,sBAAAa,GAEDA,kBAEF,IAAAC,MAAA,WAGE,SAAa,YAAT7C,MAAsBE,OAAO0D,WAAa1D,OAAO2D,cAAgB1D,UAAU2D,UAAUC,MAAM,aAAe5D,UAAU2D,UAAUC,MAAM,gBAAkB5D,UAAU2D,UAAUC,MAAM,wBADtLC,QAAA,EAQI/D,QAAU,SAAUgB,GADpBe,QACAgC,UAIH7C,UAJD8C,WAAA,WAOMD,QAAU,EADhB9B,OAASA,MACH8B,QAAa,GACfvB,QAAQE,IAAC,eADXX,OAEOmB,KAAI,gBACDa,QAAI,GACZhC,OAAOmB,KAAK,cAFPV,QAGAE,IAAI,eACFqB,QAAK,IACZhC,OAAAmB,KAAY,cAFPV,QAGAE,IAAI,eAETqB,QAAQ,GAGX/D;YC5DD,IAAIiE,kBAAmB/C,SAASgD,cAAc,SAC9CD,kBAAiBE,aAAa,MAAO,UAAYlE,OAAOmE,SAASC,SAAW,wBAD5EJ,iBAAIE,aAAmB,UAAS,SAChCjD,SAAAQ,KAAA4C,YAAiBL;YCDjB,IAAIM,OAAOC,UACPzC,OAAS,GAAIyC,WAAU,QAAUvE,OAAOmE,SAASK,MADjDC,OAAOxD,SAAXU,eAAA,SACI+C,OAAS,GAAIC,QAAA7C,QAAU2C,OAAUA","file":"scripts.min.js","sourcesContent":["var gajus, brim, platform, view, touched\r\n\r\nif (!window.navigator.standalone && platform.os.family === 'iOS' && parseInt(platform.os.version, 10) >= 8) {\r\n  let scream = gajus.Scream({\r\n    width: {\r\n      portrait: 320,\r\n      landscape: 640\r\n    }\r\n  })\r\n\r\n  brim = gajus.Brim({\r\n    viewport: scream\r\n  })\r\n\r\n  brim.on('viewchange', function (e) {\r\n    view = e.viewName\r\n    if (e.viewName === 'minimal') {\r\n      document.ontouchstart = function (e) {\r\n        e.preventDefault()\r\n        touched(e)\r\n      }\r\n    } else {\r\n      document.ontouchstart = function (e) {\r\n        touched(e)\r\n      }\r\n    }\r\n  })\r\n} else if (platform.os.family === 'iOS' && parseInt(platform.os.version, 10) >= 8) {\r\n  window.addEventListener('orientationchange', function () {\r\n    if (window.orientation) {\r\n      view = 'minimal'\r\n      document.getElementsByClassName('cover')[0].style.display = 'none'\r\n    } else {\r\n      document.getElementsByClassName('cover')[0].style.display = 'block'\r\n    }\r\n  }, false)\r\n  document.ontouchstart = function (e) {\r\n    e.preventDefault()\r\n    touched(e)\r\n  }\r\n  document.body.innerHTML = document.getElementById('brim-mask').innerHTML + document.getElementById('brim-main').innerHTML\r\n  if (window.orientation) {\r\n    view = 'minimal'\r\n    document.getElementsByClassName('cover')[0].style.display = 'none'\r\n  }\r\n} else {\r\n  document.body.innerHTML = document.getElementById('brim-main').innerHTML\r\n}\r\n","var FULLTILT, requestAnimationFrame, client, view, fulltiltOrientation\r\n\r\nlet mouse = true\r\nlet motion = new FULLTILT.getDeviceMotion()\r\nmotion.then((motionData) => {\r\n  fulltiltOrientation = motionData\r\n}).catch((msg) => {\r\n  console.error(msg)\r\n  console.log('Data not available!')\r\n})\r\n\r\nvar sendOrientation = function () {\r\n  if (fulltiltOrientation && inVR() && mouse) {\r\n    let motionData = fulltiltOrientation.getScreenAdjustedAccelerationIncludingGravity()\r\n    let obj = {}\r\n    obj.x = motionData.x\r\n    obj.y = motionData.y\r\n    obj.z = motionData.z\r\n    client.send(JSON.stringify(obj))\r\n  } else if (fulltiltOrientation && inVR()) {\r\n    let motionData = fulltiltOrientation.getScreenAdjustedRotationRate()\r\n    let obj = {}\r\n    obj.alpha = motionData.alpha\r\n    obj.beta = motionData.beta\r\n    obj.gamma = motionData.gamma\r\n    client.send(JSON.stringify(obj))\r\n  }\r\n\r\n  requestAnimationFrame(sendOrientation)\r\n}\r\nsendOrientation()\r\n\r\nvar inVR = function () {\r\n  if (view === 'minimal' && window.innerWidth > window.innerHeight && (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/iPhone|iPad|iPod/i))) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\nlet touches = 0\r\nvar touched = function (e) {\r\n  if (client) {\r\n    touches++\r\n  }\r\n}\r\n\r\ndocument.ontouchend = function () {\r\n  if (touches > 3) {\r\n    mouse = !mouse\r\n  } else if (touches > 2) {\r\n    console.log('recalibrate')\r\n    client.send('recalibrate')\r\n  } else if (touches > 1) {\r\n    client.send('rightClick')\r\n    console.log('rightClick')\r\n  } else if (touches > 0) {\r\n    client.send('mouseClick')\r\n    console.log('mouseClick')\r\n  }\r\n  touches = 0\r\n}\r\n\r\ntouched()\r\n","let livereloadScript = document.createElement('script')\r\nlivereloadScript.setAttribute('src', 'http://' + window.location.hostname + ':35729/livereload.js')\r\nlivereloadScript.setAttribute('charset', 'utf-8')\r\ndocument.body.appendChild(livereloadScript)\r\n","var Image, WebSocket\r\nlet client = new WebSocket('ws://' + window.location.host)\r\nlet canvas = document.getElementById('video')\r\nlet player = new jsmpeg(client, {canvas: canvas})\r\n"],"sourceRoot":"/source/"}